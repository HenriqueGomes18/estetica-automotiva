<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LBrothers - Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <style>
        /* Estilos do Modo Claro (Padrão) */
        body {
            background-color: #f8f9fa;
            color: #212529;
            transition: background-color 0.3s, color 0.3s;
        }
        .sidebar {
            width: 300px;
            background-color: #55345a;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            padding: 15px; /* Reduzido para maior compactação */
            display: flex;
            flex-direction: column;
            transition: width 0.3s ease, background-color 0.3s;
            /* overflow-y: auto removido para evitar rolagem */
        }
        .sidebar .menu-item {
            color: #ccc;
            transition: all 0.3s ease;
            padding: 8px 10px; /* Reduzido para maior compactação */
        }
        .sidebar .menu-item:hover, .sidebar .menu-item.active {
            color: #fff;
            background-color: #6b4c7d;
        }
        .sidebar-toggle-btn {
            background-color: #6b4c7d;
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .sidebar-toggle-btn:hover {
            background-color: #800080;
        }
        .header-bar {
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            transition: background-color 0.3s, box-shadow 0.3s;
        }
        .card-custom {
            background-color: #fff;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: background-color 0.3s, box-shadow 0.3s, transform 0.2s;
        }
        .text-primary { color: #800080 !important; }
        .text-success { color: #6b4c7d !important; }
        .text-warning { color: #55345a !important; }
        .text-info { color: #9c6cba !important; }
        .bg-custom-purple-1 { background-color: #800080 !important; }
        .bg-custom-purple-2 { background-color: #6b4c7d !important; }
        .bg-custom-purple-3 { background-color: #9c6cba !important; }
        .bg-custom-purple-4 { background-color: #b89cd8 !important; }
        .calendar-header .btn { color: #55345a; }
        .calendar-weekday { font-weight: bold; color: #800080; }
        .calendar-day .appointment-dot {
            background-color: #800080;
        }
        .action-icons .btn {
            color: #fff;
            margin-left: 5px;
        }
        .btn-view { background-color: #800080; }
        .btn-edit { background-color: #6b4c7d; }
        .btn-delete { background-color: #9c6cba; }
        .badge-pending { background-color: #ffc107 !important; color: #212529 !important; }
        .badge-confirmed { background-color: #28a745 !important; }
        .badge-inprogress { background-color: #0d6efd !important; }
        .badge-completed { background-color: #6c757d !important; }
        .badge-canceled { background-color: #dc3545 !important; }
        .service-info small { color: #6c757d; }
        .vehicle-info small { color: #6c757d; }
        .today {
            background-color: #f0e6f3;
            border: 2px solid #800080;
            font-weight: bold;
        }

        /* REMOVIDO: Estilos do antigo notification-popup (bottom-right) */

        /* NOVO: Estilos do Dropdown de Notificações */
        .notification-container {
            position: relative; /* Container necessário para posicionar o dropdown */
            margin-right: 15px;
        }
        #notification-dropdown {
            position: absolute;
            top: 55px; /* Posição abaixo do ícone */
            right: 0;
            width: 350px;
            max-height: 400px;
            overflow-y: auto;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            display: none; /* Oculto por padrão */
            transform: translateX(20px); /* Levemente afastado para melhor visual */
            opacity: 0;
            transition: opacity 0.3s, transform 0.3s;
        }
        #notification-dropdown.active {
            display: block;
            transform: translateX(0);
            opacity: 1;
        }
        .notification-item {
            display: flex;
            align-items: flex-start;
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
            text-decoration: none;
            color: #212529;
            transition: background-color 0.2s;
        }
        .notification-item:hover {
            background-color: #f1f1f1;
        }
        .notification-item.unread {
            background-color: #f8f0ff; /* Light purple background for unread */
            font-weight: 500;
        }
        .notification-item:last-child {
            border-bottom: none;
        }
        .notification-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
            object-fit: cover;
            flex-shrink: 0;
        }
        .notification-body {
            flex-grow: 1;
            font-size: 0.9em;
            line-height: 1.3;
        }
        .notification-time {
            font-size: 0.75em;
            color: #999;
            margin-top: 4px;
        }
        .notification-badge {
            font-size: 0.7rem;
            padding: 4px 6px;
        }
        /* FIM NOVO: Estilos do Dropdown de Notificações */

        /* Estilos adicionados para os novos botões do header */
        .header-action-btn {
            font-size: 1.5rem;
            color: #55345a;
            margin-left: 15px;
            cursor: pointer;
            transition: color 0.2s;
        }
        .header-action-btn:hover { color: #800080; }


        /* Estilos do Modo Escuro */
        body.dark-mode {
            background-color: #212121;
            color: #e0e0e0;
        }
        body.dark-mode .sidebar {
            background-color: #1a1a1a;
        }
        body.dark-mode .sidebar .menu-item {
            color: #b0b0b0;
        }
        body.dark-mode .sidebar .menu-item:hover, body.dark-mode .sidebar .menu-item.active {
            background-color: #333333;
        }
        body.dark-mode .sidebar-toggle-btn {
            background-color: #333333;
            color: #fff;
        }
        body.dark-mode .sidebar-toggle-btn:hover {
            background-color: #444444;
        }
        body.dark-mode .header-bar {
            background-color: #2c2c2c;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        body.dark-mode .search-bar .form-control {
            background-color: #383838;
            color: #e0e0e0;
        }
        body.dark-mode .search-bar .fa-magnifying-glass {
            color: #ccc;
        }
        body.dark-mode .card-custom {
            background-color: #2c2c2c;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
        body.dark-mode .table, body.dark-mode .table td, body.dark-mode .table th {
            color: #e0e0e0;
            background-color: transparent;
            border-color: #444;
        }
        body.dark-mode .table-hover tbody tr:hover {
            background-color: #383838;
        }
        body.dark-mode .modal-content {
            background-color: #2c2c2c;
            color: #e0e0e0;
        }
        body.dark-mode .form-control {
            background-color: #383838;
            border-color: #444;
            color: #e0e0e0;
        }
        body.dark-mode .form-control:focus {
            background-color: #383838;
            border-color: #CC99FF;
            color: #e0e0e0;
            box-shadow: 0 0 0 0.25rem rgba(204, 153, 255, 0.25);
        }
        body.dark-mode .modal-header {
            border-bottom: 1px solid #444;
        }
        body.dark-mode .modal-footer {
            border-top: 1px solid #444;
        }

        /* NOVO: Dark Mode para o Dropdown e Botões de Ação do Header */
        body.dark-mode #notification-dropdown {
            background-color: #2c2c2c;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.5);
            color: #e0e0e0;
        }
        body.dark-mode .notification-item {
            color: #e0e0e0;
            border-bottom: 1px solid #383838;
        }
        body.dark-mode .notification-item:hover {
            background-color: #383838;
        }
        body.dark-mode .notification-item.unread {
            background-color: #333344; /* Darker background for unread */
        }
        body.dark-mode .notification-time {
            color: #b0b0b0;
        }
        body.dark-mode .notification-icon,
        body.dark-mode .header-action-btn {
            color: #CC99FF !important; /* Cor dos ícones no modo escuro */
        }
        body.dark-mode .notification-icon:hover,
        body.dark-mode .header-action-btn:hover {
            color: #e0e0e0 !important;
        }
        /* FIM NOVO: Dark Mode para o Dropdown e Botões de Ação do Header */

        /* Cores do roxo para o modo escuro (textos e ícones em #CC99FF, fundos transparentes) */
        body.dark-mode .text-primary,
        body.dark-mode .text-success,
        body.dark-mode .text-warning,
        body.dark-mode .text-info,
        body.dark-mode .calendar-weekday,
        body.dark-mode .calendar-header h5,
        body.dark-mode .calendar-header .btn,
        body.dark-mode .notification-icon,
        body.dark-mode .user-info-section .fw-bold,
        body.dark-mode .today-appointment-item .appointment-time,
        body.dark-mode .service-list-item .icon-container,
        body.dark-mode .service-list-item .service-name,
        body.dark-mode h1, body.dark-mode h5 {
            color: #CC99FF !important; /* Aplica a cor do texto e ícones */
        }
        body.dark-mode .card-custom .card-title,
        body.dark-mode .card-custom .card-body p.fs-4 {
            color: #e0e0e0 !important; /* Cor mais clara para o título e valor dos cards */
        }
        body.dark-mode .card-custom .card-body i {
            color: #CC99FF !important; /* Ícones dos cards */
        }
        body.dark-mode .bg-custom-purple-1,
        body.dark-mode .bg-custom-purple-2,
        body.dark-mode .bg-custom-purple-3,
        body.dark-mode .bg-custom-purple-4,
        body.dark-mode .calendar-day .appointment-dot {
            background-color: #CC99FF !important; /* Cor de fundo para barras de progresso e pontos do calendário */
        }
        body.dark-mode .calendar-day {
            color: #b0b0b0; /* Cor dos dias no calendário */
        }
        body.dark-mode .today-appointment-item {
            border-bottom: 1px solid #383838;
        }
        body.dark-mode .today-appointment-item .appointment-service,
        body.dark-mode .text-muted,
        body.dark-mode .service-info small,
        body.dark-mode .vehicle-info small,
        body.dark-mode .client-details small {
            color: #b0b0b0 !important;
        }
        body.dark-mode .card-header.bg-white {
            background-color: #2c2c2c !important; /* Manter cabeçalhos de cards escuros */
            border-bottom: 1px solid #383838;
        }
        body.dark-mode .btn-view { background-color: #CC99FF; }
        body.dark-mode .btn-edit { background-color: #6b4c7d; }
        body.dark-mode .btn-delete { background-color: #dc3545; }
        body.dark-mode .today {
            background-color: #383838;
            border: 2px solid #CC99FF;
            color: #CC99FF !important;
        }
        /* Estilos dos gráficos para se adaptar ao modo escuro */
        .chart-container {
             background-color: #fff;
             border-radius: 8px;
             padding: 15px;
             box-shadow: 0 4px 6px rgba(0,0,0,0.1);
             height: 400px; /* Definido para os gráficos de relatórios */
        }
        body.dark-mode .chart-container {
            background-color: #2c2c2c;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
        .chart-controls .btn-group { margin-bottom: 20px; }


        /* Estilos da barra lateral - COMPACTAÇÃO APLICADA AQUI */
        .sidebar.collapsed { width: 80px; }
        .sidebar.collapsed .sidebar-logo,
        .sidebar.collapsed .button-text { display: none; }
        .sidebar.collapsed .menu-item { justify-content: center; padding: 8px 0; }
        .sidebar .sidebar-logo {
            color: #fff;
            margin-bottom: 15px; /* Reduzido */
            font-size: 1.5em;
            font-weight: bold;
            text-align: center;
        }
        .sidebar .menu-list {
            display: flex;
            flex-direction: column;
            gap: 8px; /* Reduzido */
            width: 100%;
            flex-grow: 1; /* Permite que o menu ocupe o espaço restante */
        }
        .sidebar .menu-item {
            display: flex;
            align-items: center;
            text-decoration: none;
            border-radius: 8px;
        }
        .sidebar .menu-item .button-icon {
            font-size: 1.5em;
            width: 30px;
        }
        .sidebar .menu-item .button-text {
            font-size: 1em;
            font-weight: 500;
            margin-left: 15px;
            white-space: nowrap;
        }
        .sidebar .menu-logout { 
            margin-top: auto; /* Garante que o Logout fique no final */
            margin-bottom: 0; /* Remove margem extra */
            padding-top: 15px; /* Espaçamento acima do logout */
        }

        .main-content {
            margin-left: 300px;
            padding: 20px;
            flex-grow: 1;
            transition: margin-left 0.3s ease;
        }
        .main-content.expanded { margin-left: 80px; }
        .card-custom:hover { transform: translateY(-5px); }
        .profile-img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            margin-left: 12px;
        }
        .header-bar {
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .search-bar { position: relative; flex-grow: 1; margin-right: 20px; }
        .search-bar .form-control {
            border-radius: 50px;
            padding: 10px 20px 10px 40px;
            border: none;
        }
        .search-bar .fa-magnifying-glass {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #999;
        }
        .notification-icon {
            font-size: 1.5rem;
            color: #55345a;
        }
        .notification-icon:hover { color: #800080; }
        
        .user-info-section { 
            display: flex; 
            align-items: center; 
            gap: 15px; /* Adicionado espaço entre os itens do header */
        }
        .user-info-section .fw-bold { color: #55345a; margin-right: 12px; }
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 10px;
            margin-bottom: 15px;
            color: #55345a;
        }
        .calendar-header h5 { font-weight: bold; }
        .calendar-header .btn { color: #55345a; }
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            text-align: center;
            gap: 5px;
        }
        .calendar-day {
            padding: 10px 5px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
            position: relative;
        }
        .calendar-day:hover { background-color: #f1f1f1; }
        .today-appointment-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        .today-appointment-item:last-child { border-bottom: none; }
        .today-appointment-item .appointment-info { flex-grow: 1; }
        .today-appointment-item .appointment-time { font-weight: bold; }
        .today-appointment-item .appointment-service { color: #6c757d; font-size: 0.9rem; }
        .service-list-item { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
        .service-list-item .icon-container { font-size: 1.5rem; width: 40px; text-align: center; }
        .service-list-item .service-name { font-weight: bold; flex-grow: 1; }
        .service-list-item .service-progress { width: 40%; }
        .progress {
            background-color: #e9ecef;
        }
        body.dark-mode .progress {
            background-color: #444444;
        }
        .client-info { display: flex; align-items: center; }
        .client-info .profile-img { margin-right: 10px; margin-left: 0; }
        .btn-primary {
            background-color: #800080;
            border-color: #800080;
        }
        .btn-primary:hover {
            background-color: #6b4c7d;
            border-color: #6b4c7d;
        }
        /* Novo estilo específico para a tabela de clientes/agendamentos */
        .client-row-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .client-row-info .client-details {
            display: flex;
            flex-direction: column;
        }
        .client-row-info .client-details .fw-bold {
            font-size: 1.1em;
        }
    </style>
</head>
<body>

<div class="d-flex">
    <div class="sidebar" id="sidebar">
        <div class="sidebar-logo">LBrothers</div>
        
        <div class="d-flex justify-content-between mb-2"> 
            <button class="sidebar-toggle-btn" id="sidebar-toggle-btn" style="width: 100%;">
                <i class="fas fa-chevron-left"></i>
                <span class="button-text ms-2">Recolher</span>
            </button>
            </div>

        <div class="menu-list">
            <a class="menu-item active" href="#" id="menu-dashboard">
                <div class="button-icon"><i class="fas fa-home"></i></div>
                <div class="button-text">Dashboard</div>
            </a>
            <a class="menu-item" href="#" id="menu-appointments">
                <div class="button-icon"><i class="fas fa-calendar-alt"></i></div>
                <div class="button-text">Agendamentos</div>
            </a>
            <a class="menu-item" href="#" id="menu-clients">
                <div class="button-icon"><i class="fas fa-users"></i></div>
                <div class="button-text">Clientes</div>
            </a>
            <a class="menu-item" href="#" id="menu-services">
                <div class="button-icon"><i class="fas fa-cogs"></i></div>
                <div class="button-text">Serviços</div>
            </a>
            <a class="menu-item" href="#" id="menu-reports">
                <div class="button-icon"><i class="fas fa-chart-bar"></i></div>
                <div class="button-text">Relatórios</div>
            </a>
            </div>
        
        <a class="menu-item menu-logout" href="index.html" id="menu-logout">
            <div class="button-icon"><i class="fas fa-sign-out-alt"></i></div>
            <div class="button-text">Sair</div>
        </a>
    </div>

    <div class="main-content" id="main-content">
        <div class="header-bar">
            <div class="search-bar">
                <i class="fas fa-magnifying-glass"></i>
                <input type="text" class="form-control" placeholder="Pesquisar...">
            </div>
            
            <div class="user-info-section">
                <div class="notification-container" id="notification-container">
                    <a href="#" class="notification-icon text-decoration-none" id="notification-icon">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="notification-badge" style="display: none;"></span>
                    </a>

                    <div id="notification-dropdown">
                        <div class="p-3 border-bottom">
                            <h6 class="mb-0 fw-bold text-primary">Notificações Recentes</h6>
                        </div>
                        <div id="notifications-list" class="list-group list-group-flush">
                            </div>
                        <div class="p-2 text-center border-top">
                            <a href="#" class="btn btn-link btn-sm text-primary" style="font-size: 0.85em;">Ver todos</a>
                        </div>
                    </div>
                </div>

                <a href="#" class="header-action-btn text-decoration-none" id="menu-settings" title="Configurações">
                    <i class="fas fa-cog"></i>
                </a>

                <a href="#" class="header-action-btn text-decoration-none" id="dark-mode-toggle-btn" title="Alternar Modo Escuro">
                    <i class="fas fa-sun"></i>
                </a>

                <img src="https://tse1.mm.bing.net/th/id/OIP.-6AG_jNvFeSaHutuhL8SNQHaLH?rs=1&pid=ImgDetMain&o=7&rm=3" alt="Foto de Perfil" class="profile-img">
                <span class="fw-bold">Admin</span>
            </div>
        </div>
        
        <div id="dashboard-view">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1>Visão Geral</h1>
                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#newAppointmentModal">
                    <i class="fas fa-plus me-2"></i>Novo Agendamento
                </button>
            </div>

            <div class="row g-4 mb-4">
                <div class="col-md-3">
                    <div class="card card-custom p-3">
                        <div class="card-body text-center">
                            <i class="fas fa-users text-primary fs-2 mb-2"></i>
                            <h5 class="card-title">Novos Clientes</h5>
                            <p class="fs-4 fw-bold text-primary">15</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card card-custom p-3">
                        <div class="card-body text-center">
                            <i class="fas fa-calendar-check text-success fs-2 mb-2"></i>
                            <h5 class="card-title">Agendamentos</h5>
                            <p class="fs-4 fw-bold text-success">35</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card card-custom p-3">
                        <div class="card-body text-center">
                            <i class="fas fa-dollar-sign text-warning fs-2 mb-2"></i>
                            <h5 class="card-title">Vendas (Mês)</h5>
                            <p class="fs-4 fw-bold text-warning">R$ 5.200</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card card-custom p-3">
                        <div class="card-body text-center">
                            <i class="fas fa-cogs text-info fs-2 mb-2"></i>
                            <h5 class="card-title">Serviços Ativos</h5>
                            <p class="fs-4 fw-bold text-info">12</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row g-4 mb-4">
                <div class="col-md-6">
                    <div class="card card-custom h-100">
                        <div class="card-header bg-white">
                            <div class="calendar-header">
                                <button class="btn btn-link" id="prev-month-btn"><i class="fas fa-chevron-left"></i></button>
                                <h5 id="current-month-year"></h5>
                                <button class="btn btn-link" id="next-month-btn"><i class="fas fa-chevron-right"></i></button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="calendar-grid" id="calendar-grid">
                                <div class="calendar-weekday">Dom</div>
                                <div class="calendar-weekday">Seg</div>
                                <div class="calendar-weekday">Ter</div>
                                <div class="calendar-weekday">Qua</div>
                                <div class="calendar-weekday">Qui</div>
                                <div class="calendar-weekday">Sex</div>
                                <div class="calendar-weekday">Sáb</div>
                                </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="card card-custom h-100">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Agendamentos de Hoje</h5>
                        </div>
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table table-hover mb-0">
                                    <thead>
                                        <tr>
                                            <th>Hora</th>
                                            <th>Cliente</th>
                                            <th>Serviço</th>
                                            <th>Veículo</th>
                                            <th>Status</th>
                                            <th>Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>08:00</td>
                                            <td>
                                                <div class="client-info">
                                                    <img src="https://tse4.mm.bing.net/th/id/OIP.FAUX2xPi4mwsAnbg1xE7MwHaE8?rs=1&pid=ImgDetMain&o=7&rm=3" alt="Carlos Silva" class="profile-img">
                                                    <div>
                                                        <p class="mb-0 fw-bold">Carlos Silva</p>
                                                        <small class="text-muted">(11) 98765-4321</small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="service-info">
                                                    <p class="mb-0">Polimento Completo</p>
                                                    <small class="text-muted">R$ 350,00</small>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="vehicle-info">
                                                    <p class="mb-0">Toyota Corolla</p>
                                                    <small class="text-muted">Preto - ABC1D234</small>
                                                </div>
                                            </td>
                                            <td>
                                                <span class="badge badge-completed">Concluído</span>
                                            </td>
                                            <td class="action-icons">
                                                <a href="#" class="btn btn-sm btn-view"><i class="fas fa-eye"></i></a>
                                                <a href="#" class="btn btn-sm btn-edit"><i class="fas fa-edit"></i></a>
                                                <a href="#" class="btn btn-sm btn-delete"><i class="fas fa-trash-alt"></i></a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>10:30</td>
                                            <td>
                                                <div class="client-info">
                                                    <img src="https://th.bing.com/th/id/OIP.e3nmzkD0jpUThdfFerOjnQHaJ_?o=7rm=3&rs=1&pid=ImgDetMain&o=7&rm=3" alt="Ana Oliveira" class="profile-img">
                                                    <div>
                                                        <p class="mb-0 fw-bold">Ana Oliveira</p>
                                                        <small class="text-muted">(11) 99876-5432</small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="service-info">
                                                    <p class="mb-0">Lavagem Premium</p>
                                                    <small class="text-muted">R$ 120,00</small>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="vehicle-info">
                                                    <p class="mb-0">Honda Civic</p>
                                                    <small class="text-muted">Prata - XYZ9A876</small>
                                                </div>
                                            </td>
                                            <td>
                                                <span class="badge badge-inprogress">Em Andamento</span>
                                            </td>
                                            <td class="action-icons">
                                                <a href="#" class="btn btn-sm btn-view"><i class="fas fa-eye"></i></a>
                                                <a href="#" class="btn btn-sm btn-edit"><i class="fas fa-edit"></i></a>
                                                <a href="#" class="btn btn-sm btn-delete"><i class="fas fa-trash-alt"></i></a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>13:00</td>
                                            <td>
                                                <div class="client-info">
                                                    <img src="https://tse4.mm.bing.net/th/id/OIP.stHStTWPWzXznPJ83TvimQHaFn?rs=1&pid=ImgDetMain&o=7&rm=3" alt="Roberto Santos" class="profile-img">
                                                    <div>
                                                        <p class="mb-0 fw-bold">Roberto Santos</p>
                                                        <small class="text-muted">(11) 98765-1234</small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="service-info">
                                                    <p class="mb-0">Lavagem Detalhada</p>
                                                    <small class="text-muted">R$ 180,00</small>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="vehicle-info">
                                                    <p class="mb-0">BMW X5</p>
                                                    <small class="text-muted">Branco - DEF5G678</small>
                                                </div>
                                            </td>
                                            <td>
                                                <span class="badge badge-confirmed">Confirmado</span>
                                            </td>
                                            <td class="action-icons">
                                                <a href="#" class="btn btn-sm btn-view"><i class="fas fa-eye"></i></a>
                                                <a href="#" class="btn btn-sm btn-edit"><i class="fas fa-edit"></i></a>
                                                <a href="#" class="btn btn-sm btn-delete"><i class="fas fa-trash-alt"></i></a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>15:30</td>
                                            <td>
                                                <div class="client-info">
                                                    <img src="https://tse4.mm.bing.net/th/id/OIP.Wu1mbPGD3WGxe9MTEYxf8gHaEy?rs=1&pid=ImgDetMain&o=7&rm=3" alt="Juliana Costa" class="profile-img">
                                                    <div>
                                                        <p class="mb-0 fw-bold">Juliana Costa</p>
                                                        <small class="text-muted">(11) 98765-9876</small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="service-info">
                                                    <p class="mb-0">Higienização Interna</p>
                                                    <small class="text-muted">R$ 250,00</small>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="vehicle-info">
                                                    <p class="mb-0">Volkswagen Golf</p>
                                                    <small class="text-muted">Vermelho - GHI7J890</small>
                                                </div>
                                            </td>
                                            <td>
                                                <span class="badge badge-pending">Pendente</span>
                                            </td>
                                            <td class="action-icons">
                                                <a href="#" class="btn btn-sm btn-view"><i class="fas fa-eye"></i></a>
                                                <a href="#" class="btn btn-sm btn-edit"><i class="fas fa-edit"></i></a>
                                                <a href="#" class="btn btn-sm btn-delete"><i class="fas fa-trash-alt"></i></a>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row g-4">
                <div class="col-md-6">
                    <div class="card card-custom h-100">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Agendamentos Recentes</h5>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Cliente</th>
                                            <th>Serviço</th>
                                            <th>Data</th>
                                            <th>Hora</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <div class="client-info">
                                                    <img src="https://tse4.mm.bing.net/th/id/OIP.FAUX2xPi4mwsAnbg1xE7MwHaE8?rs=1&pid=ImgDetMain&o=7&rm=3" alt="João Silva" class="profile-img"> João Silva
                                                </div>
                                            </td>
                                            <td>Polimento</td>
                                            <td>20/09/2025</td>
                                            <td>09:00</td>
                                            <td><span class="badge bg-success">Confirmado</span></td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="client-info">
                                                    <img src="https://th.bing.com/th/id/OIP.e3nmzkD0jpUThdfFerOjnQHaJ_?o=7rm=3&rs=1&pid=ImgDetMain&o=7&rm=3" alt="Maria Souza" class="profile-img"> Maria Souza
                                                </div>
                                            </td>
                                            <td>Lavagem Premium</td>
                                            <td>18/09/2025</td>
                                            <td>14:00</td>
                                            <td><span class="badge bg-danger">Cancelado</span></td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="client-info">
                                                    <img src="https://i.imgur.com/qU3Z4bV.jpeg" alt="Pedro Alvares" class="profile-img"> Pedro Alvares
                                                </div>
                                            </td>
                                            <td>Enceramento</td>
                                            <td>15/09/2025</td>
                                            <td>10:30</td>
                                            <td><span class="badge bg-warning">Pendente</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="card card-custom h-100">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Serviços Mais Agendados</h5>
                        </div>
                        <div class="card-body">
                            <div class="service-list-item">
                                <div class="icon-container text-primary"><i class="fas fa-car-wash"></i></div>
                                <div class="service-name">Lavagem Premium</div>
                                <div class="service-progress">
                                    <div class="progress" role="progressbar" aria-label="Lavagem Premium" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="height: 10px;">
                                        <div class="progress-bar bg-custom-purple-1" style="width: 75%"></div>
                                    </div>
                                </div>
                                <span class="text-muted">75%</span>
                            </div>
                            <div class="service-list-item">
                                <div class="icon-container text-success"><i class="fas fa-car"></i></div>
                                <div class="service-name">Polimento</div>
                                <div class="service-progress">
                                    <div class="progress" role="progressbar" aria-label="Polimento" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="height: 10px;">
                                        <div class="progress-bar bg-custom-purple-2" style="width: 50%"></div>
                                    </div>
                                </div>
                                <span class="text-muted">50%</span>
                            </div>
                            <div class="service-list-item">
                                <div class="icon-container text-warning"><i class="fas fa-spray-can"></i></div>
                                <div class="service-name">Detalhe Interior</div>
                                <div class="service-progress">
                                    <div class="progress" role="progressbar" aria-label="Detalhe Interior" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" style="height: 10px;">
                                        <div class="progress-bar bg-custom-purple-3" style="width: 30%"></div>
                                    </div>
                                </div>
                                <span class="text-muted">30%</span>
                            </div>
                            <div class="service-list-item">
                                <div class="icon-container text-info"><i class="fas fa-shield-alt"></i></div>
                                <div class="service-name">Proteção Cerâmica</div>
                                <div class="service-progress">
                                    <div class="progress" role="progressbar" aria-label="Proteção Cerâmica" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100" style="height: 10px;">
                                        <div class="progress-bar bg-custom-purple-4" style="width: 15%"></div>
                                    </div>
                                </div>
                                <span class="text-muted">15%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="appointments-view" style="display:none;">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1>Agenda de Agendamentos</h1>
                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#newAppointmentModal">
                    <i class="fas fa-plus me-2"></i>Novo Agendamento
                </button>
            </div>

            <div class="card card-custom p-0">
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover mb-0" id="appointments-table">
                            <thead>
                                <tr>
                                    <th style="width: 15%;">Data/Hora</th>
                                    <th style="width: 25%;">Cliente</th>
                                    <th style="width: 20%;">Serviço</th>
                                    <th style="width: 20%;">Veículo</th>
                                    <th style="width: 10%;">Status</th>
                                    <th class="text-end" style="width: 10%;">Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div id="clients-view" style="display:none;">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1>Agenda de Clientes</h1>
                <button class="btn btn-primary">
                    <i class="fas fa-plus me-2"></i>Novo Cliente
                </button>
            </div>

            <div class="card card-custom p-0">
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover mb-0" id="clients-table">
                            <thead>
                                <tr>
                                    <th style="width: 30%;">Cliente</th>
                                    <th>Telefone</th>
                                    <th>Veículo</th>
                                    <th>Último Serviço</th>
                                    <th>Status</th>
                                    <th class="text-end">Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div id="services-view" style="display:none;">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1 class="text-primary">Nossos Serviços</h1>
            </div>
            <div class="row g-4">
                <div class="col-md-6 col-lg-4">
                    <div class="card card-custom h-100">
                        <div class="card-body">
                            <h5 class="card-title fw-bold text-primary"><i class="fas fa-hand-sparkles me-2"></i> Lavagem Premium</h5>
                            <p class="card-text text-muted">Lavagem completa com produtos importados, incluindo limpeza de rodas, painel, vidros e um acabamento perfeito.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <div class="card card-custom h-100">
                        <div class="card-body">
                            <h5 class="card-title fw-bold text-primary"><i class="fas fa-gem me-2"></i> Polimento Cristalizado</h5>
                            <p class="card-text text-muted">Remoção de riscos e imperfeições, deixando a pintura com aspecto de nova e com proteção duradoura (até 12 meses).</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <div class="card card-custom h-100">
                        <div class="card-body">
                            <h5 class="card-title fw-bold text-primary"><i class="fas fa-couch me-2"></i> Detalhamento Interno</h5>
                            <p class="card-text text-muted">Limpeza profunda do interior com higienização de estofados, painel, console, teto e todos os componentes.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <div class="card card-custom h-100">
                        <div class="card-body">
                            <h5 class="card-title fw-bold text-primary"><i class="fas fa-shield-alt me-2"></i> Proteção de Pintura</h5>
                            <p class="card-text text-muted">Aplicação de cerâmica ou polímero para proteger a pintura contra raios UV, chuva ácida e contaminação.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <div class="card card-custom h-100">
                        <div class="card-body">
                            <h5 class="card-title fw-bold text-primary"><i class="fas fa-wind me-2"></i> Higienização do Ar Condicionado</h5>
                            <p class="card-text text-muted">Limpeza completa do sistema de ar condicionado, eliminando odores e bactérias para melhor qualidade do ar.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <div class="card card-custom h-100">
                        <div class="card-body">
                            <h5 class="card-title fw-bold text-primary"><i class="fas fa-hand-holding-water me-2"></i> Hidratação de Couro</h5>
                            <p class="card-text text-muted">Hidratação e proteção de bancos e componentes em couro para evitar ressecamento e rachaduras.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="reports-view" style="display:none;">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1>Relatórios</h1>
            </div>

            <div class="row g-4">
                <div class="col-md-6">
                    <div class="card card-custom h-100">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Volume de Agendamentos</h5>
                        </div>
                        <div class="card-body chart-container">
                            <canvas id="appointmentsChart"></canvas>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card card-custom h-100">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Lucro Estimado por Mês</h5>
                        </div>
                        <div class="card-body chart-container">
                            <canvas id="profitChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="newAppointmentModal" tabindex="-1" aria-labelledby="newAppointmentModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="newAppointmentModalLabel">Novo Agendamento</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="mb-3">
                                <label for="clientName" class="form-label">Nome do Cliente</label>
                                <input type="text" class="form-control" id="clientName" placeholder="Ex: João da Silva">
                            </div>
                            <div class="mb-3">
                                <label for="appointmentDate" class="form-label">Data</label>
                                <input type="date" class="form-control" id="appointmentDate">
                            </div>
                            <div class="mb-3">
                                <label for="appointmentTime" class="form-label">Hora</label>
                                <input type="time" class="form-control" id="appointmentTime">
                            </div>
                            <div class="mb-3">
                                <label for="serviceType" class="form-label">Serviço</label>
                                <select class="form-select" id="serviceType">
                                    <option selected>Selecione um Serviço</option>
                                    <option value="1">Lavagem Simples</option>
                                    <option value="2">Lavagem Premium</option>
                                    <option value="3">Polimento Completo</option>
                                    <option value="4">Higienização Interna</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="vehicleModel" class="form-label">Modelo do Veículo</label>
                                <input type="text" class="form-control" id="vehicleModel" placeholder="Ex: Honda Civic">
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="button" class="btn btn-primary">Agendar</button>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Mock Data
    
    // Mock Appointments Data
    const mockAppointments = [
        { 
            name: 'Carlos Silva', 
            email: 'carlos.silva@exemplo.com', 
            phone: '(11) 98765-4321', 
            avatar: 'https://tse4.mm.bing.net/th/id/OIP.FAUX2xPi4mwsAnbg1xE7MwHaE8?rs=1&pid=ImgDetMain&o=7&rm=3', // Masculino - Mantido
            date: '05/10/2025', 
            time: '08:00', 
            service: 'Polimento Completo', 
            vehicle: 'Toyota Corolla', 
            color: 'Preto', 
            plate: 'ABC1D234', 
            status: 'Concluído', 
            statusClass: 'badge-completed' 
        },
        { 
            name: 'Ana Oliveira', 
            email: 'ana.oliveira@exemplo.com', 
            phone: '(11) 99876-5432', 
            avatar: 'https://th.bing.com/th/id/OIP.e3nmzkD0jpUThdfFerOjnQHaJ_?o=7rm=3&rs=1&pid=ImgDetMain&o=7&rm=3', // Feminino - Mantido
            date: '05/10/2025', 
            time: '10:30', 
            service: 'Lavagem Premium', 
            vehicle: 'Honda Civic', 
            color: 'Prata', 
            plate: 'XYZ9A876', 
            status: 'Em Andamento', 
            statusClass: 'badge-inprogress' 
        },
        { 
            name: 'Roberto Santos', 
            email: 'roberto.santos@exemplo.com', 
            phone: '(11) 99887-7665', 
            avatar: 'https://i.imgur.com/qU3Z4bV.jpeg', // Masculino - Mantido
            date: '06/10/2025', 
            time: '14:00', 
            service: 'Lavagem Detalhada', 
            vehicle: 'BMW X5', 
            color: 'Branco', 
            plate: 'DEF5G678', 
            status: 'Confirmado', 
            statusClass: 'badge-confirmed' 
        },
        { 
            name: 'Juliana Costa', 
            email: 'juliana.costa@exemplo.com', 
            phone: '(11) 98765-9876', 
            avatar: 'https://i.pravatar.cc/150?img=4', // Feminino - Avatar Único
            date: '06/10/2025', 
            time: '16:30', 
            service: 'Higienização Interna', 
            vehicle: 'Renault Kwid', 
            color: 'Branco', 
            plate: 'DEF2G45', 
            status: 'Concluído', 
            statusClass: 'badge-completed' 
        },
        { 
            name: 'Gustavo Lima', 
            email: 'gustavo.lima@exemplo.com', 
            phone: '(11) 94455-6677', 
            avatar: 'https://i.pravatar.cc/150?img=1', // Masculino - Avatar Único (Gustavo Lima)
            date: '07/10/2025', 
            time: '08:30', 
            service: 'Polimento Completo', 
            vehicle: 'Hyundai HB20', 
            color: 'Azul', 
            plate: 'GHI3H67', 
            status: 'Confirmado', 
            statusClass: 'badge-confirmed' 
        },
        { 
            name: 'Patrícia Ferreira', 
            email: 'patricia.ferreira@exemplo.com', 
            phone: '(11) 93388-9900', 
            avatar: 'https://i.pravatar.cc/150?img=2', // Feminino - Avatar Único (Patrícia Ferreira)
            date: '07/10/2025', 
            time: '10:00', 
            service: 'Remoção de Piche', 
            vehicle: 'Jeep Renegade', 
            color: 'Verde', 
            plate: 'JKL4I89', 
            status: 'Pendente', 
            statusClass: 'badge-pending' 
        },
        { 
            name: 'Eduardo Martins', 
            email: 'eduardo.martins@exemplo.com', 
            phone: '(11) 92211-3344', 
            avatar: 'https://i.pravatar.cc/150?img=3', // Masculino - Avatar Único
            date: '08/10/2025', 
            time: '12:30', 
            service: 'Enceramento Premium', 
            vehicle: 'Fiat Mobi', 
            color: 'Cinza', 
            plate: 'MNO5J01', 
            status: 'Cancelado', 
            statusClass: 'badge-canceled' 
        },
        { 
            name: 'Tatiane Costa', 
            email: 'tatiane.costa@exemplo.com', 
            phone: '(11) 91100-2255', 
            avatar: 'https://i.pravatar.cc/150?img=5', // Feminino - Avatar Único
            date: '08/10/2025', 
            time: '14:30', 
            service: 'Lavagem Simples', 
            vehicle: 'Chery QQ', 
            color: 'Branco', 
            plate: 'PQR6K23', 
            status: 'Pendente', 
            statusClass: 'badge-pending' 
        }
    ];

    // Mock Clients Data
    const mockClients = [
        { 
            name: 'Carlos Silva', 
            email: 'carlos.silva@exemplo.com', 
            phone: '(11) 98765-4321', 
            avatar: 'https://tse4.mm.bing.net/th/id/OIP.FAUX2xPi4mwsAnbg1xE7MwHaE8?rs=1&pid=ImgDetMain&o=7&rm=3', // Masculino - Mantido
            vehicle: 'Toyota Corolla', 
            lastService: 'Polimento Completo', 
            status: 'Ativo' 
        },
        { 
            name: 'Ana Oliveira', 
            email: 'ana.oliveira@exemplo.com', 
            phone: '(11) 99876-5432', 
            avatar: 'https://th.bing.com/th/id/OIP.e3nmzkD0jpUThdfFerOjnQHaJ_?o=7rm=3&rs=1&pid=ImgDetMain&o=7&rm=3', // Feminino - Mantido
            vehicle: 'Honda Civic', 
            lastService: 'Lavagem Premium', 
            status: 'Ativo' 
        },
        { 
            name: 'Roberto Santos', 
            email: 'roberto.santos@exemplo.com', 
            phone: '(11) 99887-7665', 
            avatar: 'https://tse4.mm.bing.net/th/id/OIP.stHStTWPWzXznPJ83TvimQHaFn?rs=1&pid=ImgDetMain&o=7&rm=3', // Masculino - Mantido
            vehicle: 'BMW X5', 
            lastService: 'Lavagem Detalhada', 
            status: 'Inativo' 
        },
        { 
            name: 'Juliana Costa', 
            email: 'juliana.costa@exemplo.com', 
            phone: '(11) 98765-9876', 
            avatar: 'https://i.pravatar.cc/150?img=4', // Feminino - Avatar Único
            vehicle: 'Renault Kwid', 
            lastService: 'Higienização Interna', 
            status: 'Ativo' 
        },
        { 
            name: 'Gustavo Lima', 
            email: 'gustavo.lima@exemplo.com', 
            phone: '(11) 94455-6677', 
            avatar: 'https://i.pravatar.cc/150?img=1', // Masculino - Avatar Único
            vehicle: 'Hyundai HB20', 
            lastService: 'Polimento Completo', 
            status: 'Ativo' 
        },
        { 
            name: 'Patrícia Ferreira', 
            email: 'patricia.ferreira@exemplo.com', 
            phone: '(11) 93388-9900', 
            avatar: 'https://i.pravatar.cc/150?img=2', // Feminino - Avatar Único
            vehicle: 'Jeep Renegade', 
            lastService: 'Remoção de Piche', 
            status: 'Pendente' 
        },
        { 
            name: 'Eduardo Martins', 
            email: 'eduardo.martins@exemplo.com', 
            phone: '(11) 92211-3344', 
            avatar: 'https://i.pravatar.cc/150?img=3', // Masculino - Avatar Único
            vehicle: 'Fiat Mobi', 
            lastService: 'Enceramento Premium', 
            status: 'Inativo' 
        },
        { 
            name: 'Tatiane Costa', 
            email: 'tatiane.costa@exemplo.com', 
            phone: '(11) 91100-2255', 
            avatar: 'https://i.pravatar.cc/150?img=5', // Feminino - Avatar Único
            vehicle: 'Chery QQ', 
            lastService: 'Lavagem Simples', 
            status: 'Pendente' 
        }
    ];

    // --- Start: Appointments View Logic ---
    function renderAppointmentsTable() {
        const tableBody = document.querySelector('#appointments-table tbody');
        tableBody.innerHTML = ''; // Limpa o conteúdo existente

        // Ordena os agendamentos por data e hora (simulação)
        const sortedAppointments = [...mockAppointments].sort((a, b) => {
            const dateA = new Date(a.date.split('/').reverse().join('-') + ' ' + a.time);
            const dateB = new Date(b.date.split('/').reverse().join('-') + ' ' + b.time);
            return dateA - dateB;
        });

        sortedAppointments.forEach(appt => {
            const row = tableBody.insertRow();
            let statusBadge = `<span class="badge ${appt.statusClass}">${appt.status}</span>`;

            row.innerHTML = `
                <td>
                    <p class="mb-0 fw-bold">${appt.date}</p>
                    <small class="text-muted">${appt.time}</small>
                </td>
                <td>
                    <div class="client-row-info">
                        <img src="${appt.avatar}" alt="${appt.name}" class="profile-img">
                        <div class="client-details">
                            <p class="mb-0 fw-bold">${appt.name}</p>
                            <small class="text-muted">${appt.phone}</small>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="service-info">
                        <p class="mb-0">${appt.service}</p>
                        <small class="text-muted">R$ ${Math.floor(Math.random() * 500) + 50},00</small>
                    </div>
                </td>
                <td>
                    <div class="vehicle-info">
                        <p class="mb-0">${appt.vehicle}</p>
                        <small class="text-muted">${appt.color} - ${appt.plate}</small>
                    </div>
                </td>
                <td>${statusBadge}</td>
                <td class="action-icons text-end">
                    <a href="#" class="btn btn-sm btn-view"><i class="fas fa-eye"></i></a>
                    <a href="#" class="btn btn-sm btn-edit"><i class="fas fa-edit"></i></a>
                    <a href="#" class="btn btn-sm btn-delete"><i class="fas fa-trash-alt"></i></a>
                </td>
            `;
        });
    }
    // --- End: Appointments View Logic ---

    // --- Start: Clients View Logic (Novo) ---
    function renderClientsTable() {
        const tableBody = document.querySelector('#clients-table tbody');
        if (!tableBody) return;
        tableBody.innerHTML = ''; 

        mockClients.forEach(client => {
            const row = tableBody.insertRow();
            let statusClass = client.status === 'Ativo' ? 'bg-success' : client.status === 'Pendente' ? 'bg-warning' : 'bg-secondary';
            let statusBadge = `<span class="badge ${statusClass}">${client.status}</span>`;

            row.innerHTML = `
                <td>
                    <div class="client-row-info">
                        <img src="${client.avatar}" alt="${client.name}" class="profile-img">
                        <div class="client-details">
                            <p class="mb-0 fw-bold">${client.name}</p>
                            <small class="text-muted">${client.email}</small>
                        </div>
                    </div>
                </td>
                <td>${client.phone}</td>
                <td>${client.vehicle}</td>
                <td>${client.lastService}</td>
                <td>${statusBadge}</td>
                <td class="action-icons text-end">
                    <a href="#" class="btn btn-sm btn-view"><i class="fas fa-eye"></i></a>
                    <a href="#" class="btn btn-sm btn-edit"><i class="fas fa-edit"></i></a>
                </td>
            `;
        });
    }
    // --- End: Clients View Logic ---

    // --- Start: Notification Logic ---
    // Mock Notification Data (Kept to maintain existing functionality)
    const mockNotifications = [
        { id: 1, type: 'appointment', message: 'Novo agendamento confirmado: Ana Oliveira (10:30).', time: '5 min atrás', read: false, avatar: 'https://th.bing.com/th/id/OIP.e3nmzkD0jpUThdfFerOjnQHaJ_?o=7rm=3&rs=1&pid=ImgDetMain&o=7&rm=3' },
        { id: 2, type: 'client', message: 'Novo cliente cadastrado: Roberto Santos.', time: '1 hora atrás', read: false, avatar: 'https://i.imgur.com/qU3Z4bV.jpeg' },
        { id: 3, type: 'report', message: 'Relatório mensal de vendas pronto para visualização.', time: '1 dia atrás', read: true, avatar: 'https://tse1.mm.bing.net/th/id/OIP.-6AG_jNvFeSaHutuhL8SNQHaLH?rs=1&pid=ImgDetMain&o=7&rm=3' }, // Admin URL
        { id: 4, type: 'appointment', message: 'O agendamento de Carlos Silva foi concluído.', time: '2 dias atrás', read: true, avatar: 'https://tse4.mm.bing.net/th/id/OIP.FAUX2xPi4mwsAnbg1xE7MwHaE8?rs=1&pid=ImgDetMain&o=7&rm=3' }
    ];

    const notificationIcon = document.getElementById('notification-icon');
    const notificationDropdown = document.getElementById('notification-dropdown');

    function renderNotifications() {
        const list = document.getElementById('notifications-list');
        list.innerHTML = '';
        let unreadCount = 0;

        mockNotifications.forEach(notif => {
            if (!notif.read) {
                unreadCount++;
            }

            let iconClass = 'fas fa-info-circle text-primary';
            if (notif.type === 'appointment') iconClass = 'fas fa-calendar-check text-success';
            if (notif.type === 'report') iconClass = 'fas fa-chart-bar text-warning';
            if (notif.type === 'client') iconClass = 'fas fa-user-times text-danger';

            const html = `
                <a href="#" class="notification-item ${notif.read ? '' : 'unread'}">
                    <img src="${notif.avatar}" alt="Avatar" class="notification-avatar">
                    <div class="notification-body">
                        ${notif.message}
                        <div class="notification-time">${notif.time}</div>
                    </div>
                </a>
            `;
            list.innerHTML += html;
        });

        const badge = document.getElementById('notification-badge');
        if (unreadCount > 0) {
            badge.textContent = unreadCount;
            badge.style.display = 'block';
        } else {
            badge.style.display = 'none';
        }
    }

    // Renderiza as notificações na inicialização
    renderNotifications();

    notificationIcon.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation(); // Evita que o clique feche imediatamente
        notificationDropdown.classList.toggle('active');

        // Marca as notificações como lidas ao abrir o dropdown (simulação)
        mockNotifications.forEach(n => n.read = true);
        renderNotifications(); // Re-renderiza para atualizar o badge
    });

    // Fecha o dropdown se clicar fora
    document.addEventListener('click', function(e) {
        if (!notificationDropdown.contains(e.target) && !notificationIcon.contains(e.target)) {
            notificationDropdown.classList.remove('active');
        }
    });
    // --- End: Notification Logic ---

    // Modo Escuro (Dark Mode) - Kept to maintain existing functionality
    const moonIcon = 'fa-moon';
    const sunIcon = 'fa-sun';

    // Variáveis para os gráficos, inicializadas como null (Dashboard e Reports)
    let myChart = null; // Gráfico de vendas (Dashboard)
    let AppointmentsChart = null; // Gráfico de agendamentos (Reports)
    let ProfitChart = null; // Gráfico de lucro (Reports)

    function getChartColors() {
        const purpleColor = '#800080';
        const lightPurpleColor = '#CC99FF';

        // Cores padrão (modo claro)
        let textColor = 'rgba(0, 0, 0, 0.8)';
        let gridColor = 'rgba(0, 0, 0, 0.1)';

        // Verifica o modo atual
        if (document.body.classList.contains('dark-mode')) {
            textColor = '#CC99FF';
            gridColor = 'rgba(204, 153, 255, 0.1)';
        }

        return { purpleColor, lightPurpleColor, textColor, gridColor };
    }

    function updateChartColors(chart) {
        if (!chart) return;
        const { purpleColor, lightPurpleColor, textColor, gridColor } = getChartColors();

        // Atualiza cores dos eixos
        chart.options.scales.x.ticks.color = textColor;
        chart.options.scales.x.grid.color = gridColor;
        chart.options.scales.y.ticks.color = textColor;
        chart.options.scales.y.grid.color = gridColor;
        
        // Atualiza cores das legendas
        if (chart.options.plugins.legend) {
            chart.options.plugins.legend.labels.color = textColor;
        }

        // Atualiza cores dos dados (dependendo do tipo de gráfico)
        chart.data.datasets.forEach(dataset => {
            if (chart.config.type === 'bar') {
                dataset.backgroundColor = lightPurpleColor;
                dataset.borderColor = purpleColor;
            } else if (chart.config.type === 'line') {
                dataset.backgroundColor = 'rgba(204, 153, 255, 0.2)'; // Fundo com transparência
                dataset.borderColor = purpleColor;
                dataset.pointBackgroundColor = purpleColor;
            }
        });

        chart.update();
    }


    document.getElementById('dark-mode-toggle-btn').addEventListener('click', function() {
        document.body.classList.toggle('dark-mode');
        const icon = this.querySelector('.fas');
        
        if (document.body.classList.contains('dark-mode')) {
            icon.classList.remove(sunIcon);
            icon.classList.add(moonIcon);
            this.title = "Alternar Modo Claro";
        } else {
            icon.classList.remove(moonIcon);
            icon.classList.add(sunIcon);
            this.title = "Alternar Modo Escuro";
        }

        // Atualiza as cores dos gráficos
        updateChartColors(myChart);
        updateChartColors(AppointmentsChart);
        updateChartColors(ProfitChart);
    });

    // Sidebar collapse toggle (Kept to maintain existing functionality)
    const sidebar = document.getElementById('sidebar');
    const mainContent = document.getElementById('main-content');
    const sidebarToggleBtn = document.getElementById('sidebar-toggle-btn');

    sidebarToggleBtn.addEventListener('click', function() {
        sidebar.classList.toggle('collapsed');
        mainContent.classList.toggle('expanded');
        const toggleBtnIcon = this.querySelector('.fas');

        if (sidebar.classList.contains('collapsed')) {
            toggleBtnIcon.classList.remove('fa-chevron-left');
            toggleBtnIcon.classList.add('fa-chevron-right');
        } else {
            toggleBtnIcon.classList.remove('fa-chevron-right');
            toggleBtnIcon.classList.add('fa-chevron-left');
        }
    });

    // --- START: Calendar Implementation ---
    const calendarGrid = document.getElementById('calendar-grid');
    const monthYearDisplay = document.getElementById('current-month-year');
    const prevMonthBtn = document.getElementById('prev-month-btn');
    const nextMonthBtn = document.getElementById('next-month-btn');

    let currentDate = new Date();
    const today = new Date();
    const monthNames = ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"];

    // Função mock para verificar agendamentos (simulação)
    function hasAppointment(year, month, day) {
        // Formato da data no mock: DD/MM/YYYY
        const dateStr = `${day.toString().padStart(2, '0')}/${(month + 1).toString().padStart(2, '0')}/${year}`;
        
        // Verifica se a data do calendário corresponde a uma data de agendamento mock
        return mockAppointments.some(appt => appt.date === dateStr) || (day % 7 === 5);
    }

    function renderCalendar() {
        const year = currentDate.getFullYear();
        const month = currentDate.getMonth();

        // Atualiza o cabeçalho
        monthYearDisplay.textContent = `${monthNames[month]} ${year}`;

        // Remove todos os dias anteriores, mantendo os dias da semana
        const existingDays = calendarGrid.querySelectorAll('.calendar-day');
        existingDays.forEach(day => day.remove());

        // 1. Encontra o primeiro dia do mês e o último dia do mês
        const firstDayOfMonth = new Date(year, month, 1);
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        
        // Obtém o dia da semana do primeiro dia (0=Dom, 1=Seg, ..., 6=Sáb)
        let startingDay = firstDayOfMonth.getDay();

        // Adiciona células vazias para preencher o início da semana
        for (let i = 0; i < startingDay; i++) {
            const emptyCell = document.createElement('div');
            emptyCell.classList.add('calendar-day', 'text-muted');
            calendarGrid.appendChild(emptyCell);
        }

        // 2. Adiciona os dias do mês
        for (let day = 1; day <= daysInMonth; day++) {
            const dayCell = document.createElement('div');
            dayCell.classList.add('calendar-day');
            dayCell.textContent = day;

            // Verifica se é o dia atual
            if (day === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
                dayCell.classList.add('today');
            }

            // Adiciona ponto se houver agendamento
            if (hasAppointment(year, month, day)) {
                const dot = document.createElement('span');
                dot.classList.add('appointment-dot');
                dot.style.cssText = 'width: 6px; height: 6px; border-radius: 50%; position: absolute; bottom: 5px; right: 5px;';
                dayCell.appendChild(dot);
            }

            calendarGrid.appendChild(dayCell);
        }
    }

    prevMonthBtn.addEventListener('click', () => {
        currentDate.setMonth(currentDate.getMonth() - 1);
        renderCalendar();
    });

    nextMonthBtn.addEventListener('click', () => {
        currentDate.setMonth(currentDate.getMonth() + 1);
        renderCalendar();
    });

    // Chama a renderização do calendário na inicialização
    renderCalendar();
    // --- END: Calendar Implementation ---

    // Renderiza o gráfico de vendas padrão do Dashboard (Kept)
    const ctx = document.getElementById('salesChart');
    if (ctx) {
        const { purpleColor, lightPurpleColor, textColor, gridColor } = getChartColors();
        const data = {
            labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'],
            datasets: [{
                label: 'Faturamento (R$)',
                data: [3000, 4500, 5200, 4800, 6000, 5500],
                backgroundColor: lightPurpleColor,
                borderColor: purpleColor,
                borderWidth: 1,
                borderRadius: 5,
            }]
        };
        const config = {
            type: 'bar',
            data: data,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        labels: {
                            color: textColor // Aplica a cor do texto
                        }
                    }
                },
                scales: {
                    x: {
                        grid: { 
                            color: gridColor // Aplica a cor da linha de grade
                        },
                        ticks: {
                            color: textColor // Aplica a cor do texto
                        }
                    },
                    y: {
                        beginAtZero: true,
                        grid: { 
                            color: gridColor 
                        },
                        ticks: {
                            color: textColor,
                            callback: function(value) {
                                return 'R$' + value.toLocaleString('pt-BR');
                            }
                        }
                    }
                }
            }
        };
        myChart = new Chart(ctx, config);
    }
    
    // --- START: Reports Charts Implementation ---
    function renderReportsCharts() {
        const { purpleColor, lightPurpleColor, textColor, gridColor } = getChartColors();

        // 1. Appointments Chart
        const ctxAppointments = document.getElementById('appointmentsChart');
        if (ctxAppointments && !AppointmentsChart) {
             const dataAppointments = {
                labels: ['Jan','Fev','Mar','Abr','Mai','Jun','Jul','Ago','Set','Out','Nov','Dez'],
                datasets: [{
                    label: 'Nº Agendamentos',
                    data: [45, 60, 52, 70, 85, 90, 75, 65, 80, 95, 100, 88],
                    backgroundColor: lightPurpleColor,
                    borderColor: purpleColor,
                    borderWidth: 1,
                    borderRadius: 5,
                }]
            };
            const configAppointments = {
                type: 'bar',
                data: dataAppointments,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: textColor
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: { color: gridColor },
                            ticks: { color: textColor }
                        },
                        y: {
                            beginAtZero: true,
                            grid: { color: gridColor },
                            ticks: { color: textColor }
                        }
                    }
                }
            };
            AppointmentsChart = new Chart(ctxAppointments, configAppointments);
        } else if (AppointmentsChart) {
            updateChartColors(AppointmentsChart);
        }

        // 2. Profit Chart
        const ctxProfit = document.getElementById('profitChart');
        if (ctxProfit && !ProfitChart) {
            const dataProfit = {
                labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'],
                datasets: [{
                    label: 'Lucro (R$)',
                    data: [2500, 3800, 4200, 3900, 5000, 4500], // Valores realistas entre R$2k e R$5k
                    backgroundColor: 'rgba(128, 0, 128, 0.2)', // Roxo com transparência para a área
                    borderColor: purpleColor,
                    borderWidth: 2,
                    fill: true, // Habilita o preenchimento da área
                    tension: 0.4, // Curva suave na linha
                    pointBackgroundColor: purpleColor,
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: purpleColor
                }]
            };
            const configProfit = {
                type: 'line',
                data: dataProfit,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: textColor }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(context.parsed.y);
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: { color: gridColor },
                            ticks: { color: textColor }
                        },
                        y: {
                            beginAtZero: false,
                            min: 0, 
                            max: 6000, // Ajuste para melhor visualização dos valores (R$2k - R$5k)
                            grid: { color: gridColor },
                            ticks: { 
                                color: textColor,
                                callback: function(value) {
                                    return 'R$' + value.toLocaleString('pt-BR');
                                }
                            }
                        }
                    }
                }
            };
            ProfitChart = new Chart(ctxProfit, configProfit);
        } else if (ProfitChart) {
            updateChartColors(ProfitChart);
        }
    }
    
    // --- END: Reports Charts Implementation ---

    document.addEventListener('DOMContentLoaded', function() {
        // --- START: New View Switching Logic ---
        const views = ['dashboard-view', 'services-view', 'appointments-view', 'clients-view', 'reports-view'];
        const menuItems = document.querySelectorAll('.sidebar .menu-item');

        function showView(viewId, clickedMenuId) {
            // 1. Hide all views
            views.forEach(id => {
                const viewElement = document.getElementById(id);
                if (viewElement) {
                    viewElement.style.display = 'none';
                }
            });

            // 2. Show the requested view
            const targetView = document.getElementById(viewId);
            if (targetView) {
                targetView.style.display = 'block';
            }

            // 3. Update active menu item
            menuItems.forEach(item => {
                item.classList.remove('active');
            });
            const activeMenuItem = document.getElementById(clickedMenuId);
            if (activeMenuItem) {
                activeMenuItem.classList.add('active');
            }

            // 4. Se a view de relatórios ou appointments for ativada, renderiza o conteúdo
            if (viewId === 'reports-view') {
                renderReportsCharts();
            }
            if (viewId === 'appointments-view') {
                renderAppointmentsTable();
            }
            if (viewId === 'clients-view') {
                renderClientsTable();
            }
        }

        // Initial state: ensure all non-dashboard views are hidden
        document.getElementById('services-view').style.display = 'none';
        const clientsView = document.getElementById('clients-view');
        if (clientsView) clientsView.style.display = 'none';
        const appointmentsView = document.getElementById('appointments-view');
        if (appointmentsView) appointmentsView.style.display = 'none';
        const reportsView = document.getElementById('reports-view');
        if (reportsView) reportsView.style.display = 'none';

        // Add event listeners for all menu items
        document.getElementById('menu-dashboard').addEventListener('click', (e) => {
            e.preventDefault();
            showView('dashboard-view', 'menu-dashboard');
        });

        document.getElementById('menu-services').addEventListener('click', (e) => {
            e.preventDefault();
            showView('services-view', 'menu-services');
        });
        
        document.getElementById('menu-appointments').addEventListener('click', (e) => {
            e.preventDefault();
            showView('appointments-view', 'menu-appointments');
            renderAppointmentsTable(); // NEW: Call the function to render the table content
        });

        document.getElementById('menu-clients').addEventListener('click', (e) => {
            e.preventDefault();
            showView('clients-view', 'menu-clients');
            renderClientsTable(); // NEW: Call the function to render the table content
        });

        document.getElementById('menu-reports').addEventListener('click', (e) => {
            e.preventDefault();
            showView('reports-view', 'menu-reports');
        });
        // --- END: New View Switching Logic ---
    });
</script>

</body>
</html>
